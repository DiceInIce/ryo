# –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ —Å—Ç–∞—Ä—ã–º –±—ç–∫–µ–Ω–¥–æ–º

## ‚úÖ –ù–æ–≤—ã–π –±—ç–∫–µ–Ω–¥ (backend/server.js) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
- `POST /cache` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–µ–µ—Ä–æ–≤ –¥–ª—è —Ñ–∏–ª—å–º–æ–≤
- `POST /cache_shiki` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–µ–µ—Ä–æ–≤ –¥–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤

---

## üî¥ –°—Ç–∞—Ä—ã–π –±—ç–∫–µ–Ω–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /auth/telegram-login-token` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Telegram
- `GET /auth/check-telegram-auth?token=...` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram
- `GET /user` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /user/name` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `GET /comments/${movieId}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ —Ñ–∏–ª—å–º—É
- `POST /comments/${movieId}` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - Body: `{ content: string, parent_id?: number }`
- `PUT /comments/${commentId}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - Body: `{ content: string }`
- `DELETE /comments/${commentId}` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `POST /comments/${commentId}/rate` - –æ—Ü–µ–Ω–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - Body: `{ rating: number }`

### üìã –°–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å—Ç–æ—Ä–∏—è, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Ç.–¥.)
- `GET /list/${type}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - type: `history`, `favorites`, `watchlist`, –∏ —Ç.–¥.
- `PUT /list/${type}/${id}` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫
- `DELETE /list/${type}/${id}` - —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞
- `DELETE /list/${type}` - –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ–≥–æ —Å–ø–∏—Å–∫–∞
- `GET /user-list/${userId}/${type}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /user-list-counters/${userId}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ —Å–ø–∏—Å–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üé¨ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–∞—Ö –∏ —Å–µ—Ä–∏–∞–ª–∞—Ö
- `GET /search/${searchTerm}` - –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤
- `GET /kp_info2/${kpId}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–µ —Å –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞
- `GET /shiki_info/${shikiId}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–∏–∞–ª–µ —Å Shikimori
- `GET /top/${activeTime}?type=${typeFilter}&limit=${limit}` - —Ç–æ–ø —Ñ–∏–ª—å–º–æ–≤
  - activeTime: `all`, `year`, `month`, `week`, `day`
  - typeFilter: `all`, `movie`, `series`
- `GET /discussed/${type}` - –æ–±—Å—É–∂–¥–∞–µ–º—ã–µ —Ñ–∏–ª—å–º—ã
  - type: `hot`, `new`, –∏ —Ç.–¥.
- `GET /get_dons` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤/—Å–ø–æ–Ω—Å–æ—Ä–æ–≤
- `GET /imdb_to_kp/${imdb_id}` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è IMDB ID –≤ –ö–∏–Ω–æ–ø–æ–∏—Å–∫ ID
- `GET /imdb_parental_guide/${imdb_id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö —Å IMDB
- `GET /shiki_to_kp/${shiki_id}` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Shikimori ID –≤ –ö–∏–Ω–æ–ø–æ–∏—Å–∫ ID

### ‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏
- `GET /rating/${kpId}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ñ–∏–ª—å–º–∞
- `POST /rating/${kpId}` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
  - Body: `{ rating: number }`

### ‚è±Ô∏è –¢–∞–π–º–∏–Ω–≥–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤)
- `POST /timings/${kpId}` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–∞
  - Body: `{ timing_text: string }`
- `PUT /timings/${timingId}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–∞
  - Body: `{ timing_text: string }`
- `DELETE /timings/${timingId}` - —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–∞
- `POST /timings/${timingId}/report` - –∂–∞–ª–æ–±–∞ –Ω–∞ —Ç–∞–π–º–∏–Ω–≥
  - Body: `{ report_text: string }`
- `GET /timings/top` - —Ç–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤
- `GET /timings/all` - –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏
- `GET /timings/${timingId}/vote` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤ –∑–∞ —Ç–∞–π–º–∏–Ω–≥
- `POST /timings/${timingId}/vote` - –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ —Ç–∞–π–º–∏–Ω–≥
  - Body: `{ vote_type: string }`
- `POST /timings/submission/${submissionId}/approve` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–∞ (–º–æ–¥–µ—Ä–∞—Ü–∏—è)
- `POST /timings/submission/${submissionId}/reject` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–∞ (–º–æ–¥–µ—Ä–∞—Ü–∏—è)
- `POST /timings/submission/${submissionId}/clean_text` - –ø–æ–º–µ—Ç–∫–∞ –∫–∞–∫ —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç

### üìù –ó–∞–º–µ—Ç–∫–∏ –∫ —Ñ–∏–ª—å–º–∞–º
- `GET /movies/${kpId}/note` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ –∫ —Ñ–∏–ª—å–º—É
- `POST /movies/${kpId}/note` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
  - Body: `{ note_text: string }`
- `DELETE /movies/${kpId}/note` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

### üé≤ –°–ª—É—á–∞–π–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `GET /chance` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞

### üì∫ Twitch
- `GET /twitch/${username}` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ Twitch —Å—Ç—Ä–∏–º–µ—Ä–µ

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `GET /notifications` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `GET /notifications/unread-count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `POST /notifications/mark-read` - –ø–æ–º–µ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
  - Body: `{ notification_ids: number[] | null }`
- `DELETE /notifications/${notificationId}` - —É–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### üòÄ –≠–º–æ–¥–∑–∏
- `GET /search_emotes/${query}` - –ø–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ù–æ–≤—ã–π –±—ç–∫–µ–Ω–¥:** 3 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (—Ç–æ–ª—å–∫–æ –ø–ª–µ–µ—Ä—ã)
**–°—Ç–∞—Ä—ã–π –±—ç–∫–µ–Ω–¥:** ~50+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (–≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–í—Å–µ —ç—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Å—Ç–∞—Ä–æ–º –±—ç–∫–µ–Ω–¥–µ. –ï—Å–ª–∏ —Å—Ç–∞—Ä—ã–π –±—ç–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- API URL –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Firebase Remote Config
- Fallback: `VITE_APP_API_URL` –∏–ª–∏ `http://localhost:8000`
- –ù–æ–≤—ã–π –±—ç–∫–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8000, –Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–ª–µ–µ—Ä—ã
- –°—Ç–∞—Ä—ã–π –±—ç–∫–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –¥—Ä—É–≥–æ–º—É URL –∏–ª–∏ –ø–æ—Ä—Ç—É
